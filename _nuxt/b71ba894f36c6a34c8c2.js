(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{201:function(e,t,r){"use strict";(function(e){t.a={data:function(){return{order:{user:{},message:""}}},computed:{isLoading:function(){return this.$store.state.isLoading},cartData:function(){return this.$store.state.cartData},uploadCart:function(){return this.$store.state.uploadCart}},created:function(){this.$store.dispatch("getCartData")},methods:{createOrder:function(){var t=this;this.$validator.validate().then((function(r){r?t.$store.dispatch("createOrder",t.order):(t.$store.dispatch("uploadCart",!1),e(event.target).removeAttr("disabled"))}))}}}}).call(this,r(42))},249:function(e,t,r){"use strict";r.r(t);var o=r(201).a,l=r(3),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container pt-md-3 pb-md-5 section-full-height"},[r("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}}),e._v(" "),e._m(0),e._v(" "),r("div",{staticClass:"row mt-md-4"},[r("form",{staticClass:"col-md-7 px-4"},[r("div",{staticClass:"form-row mb-3"},[r("div",{staticClass:"col-12 h5 mb-3 text-center"},[e._v("\n            訂單資訊\n          ")]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("label",{attrs:{for:"username"}},[e._v("收件人姓名")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.order.user.name,expression:"order.user.name"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("name")},attrs:{id:"username",type:"text",name:"name",placeholder:"輸入姓名"},domProps:{value:e.order.user.name},on:{input:function(t){t.target.composing||e.$set(e.order.user,"name",t.target.value)}}}),e._v(" "),e.errors.has("name")?r("span",{staticClass:"text-danger"},[e._v("姓名欄位不得留空")]):e._e()]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("label",{attrs:{for:"usertel"}},[e._v("收件人電話")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.order.user.tel,expression:"order.user.tel"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("tel")},attrs:{id:"usertel",type:"tel",name:"tel",placeholder:"請輸入電話"},domProps:{value:e.order.user.tel},on:{input:function(t){t.target.composing||e.$set(e.order.user,"tel",t.target.value)}}}),e._v(" "),e.errors.has("tel")?r("span",{staticClass:"text-danger"},[e._v("電話欄位不得留空")]):e._e()])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"useremail"}},[e._v("Email")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:e.order.user.email,expression:"order.user.email"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("email")},attrs:{id:"useremail",type:"email",name:"email",placeholder:"請輸入 Email"},domProps:{value:e.order.user.email},on:{input:function(t){t.target.composing||e.$set(e.order.user,"email",t.target.value)}}}),e._v(" "),e.errors.has("email")?r("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.first("email")))]):e._e()]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"useraddress"}},[e._v("收件人地址")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.order.user.address,expression:"order.user.address"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("address")},attrs:{id:"useraddress",type:"text",name:"address",placeholder:"請輸入地址"},domProps:{value:e.order.user.address},on:{input:function(t){t.target.composing||e.$set(e.order.user,"address",t.target.value)}}}),e._v(" "),e.errors.has("address")?r("span",{staticClass:"text-danger"},[e._v("地址欄位不得留空")]):e._e()]),e._v(" "),r("div",{staticClass:"form-group"},[e._m(1),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.order.message,expression:"order.message"}],staticClass:"form-control",attrs:{id:"comment",name:"",cols:"30",rows:"4"},domProps:{value:e.order.message},on:{input:function(t){t.target.composing||e.$set(e.order,"message",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-5 border shadow d-flex flex-column"},[r("div",{staticClass:"h5 text-center mt-3"},[e._v("\n          您的訂單\n        ")]),e._v(" "),r("table",{staticClass:"table mt-3"},[e._m(2),e._v(" "),r("tbody",e._l(e.cartData.carts,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.product.title)+" Ｘ"+e._s(t.qty))]),e._v(" "),r("td",{staticClass:"text-right"},[e._v("\n                "+e._s(e._f("currency")(t.product.price))+"\n              ")])])})),0),e._v(" "),r("tfoot",{staticClass:"border-top"},[r("tr",[r("th",[e._v("總計")]),e._v(" "),r("td",{staticClass:"text-right"},[e._v("\n                "+e._s(e._f("currency")(e.cartData.total))+"\n              ")])]),e._v(" "),e.cartData.final_total<e.cartData.total?r("tr",[e._m(3),e._v(" "),r("td",{staticClass:"text-right"},[e._v("\n                "+e._s(e._f("currency")(e.cartData.final_total))+"\n              ")])]):e._e()])]),e._v(" "),r("div",{staticClass:"order-submit-section p-2 mt-auto"},[r("div",{staticClass:"d-flex"},[r("strong",{},[e._v("配送方式")]),e._v(" "),r("div",{staticClass:"ml-auto"},[r("div",{staticClass:"form-check ml-auto"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.user.payment_method,expression:"order.user.payment_method"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-check-input",class:{"is-invalid":e.errors.has("payment")},attrs:{id:"CVS_COD",type:"radio",name:"payment",value:"CVS_COD",checked:""},domProps:{checked:e._q(e.order.user.payment_method,"CVS_COD")},on:{change:function(t){return e.$set(e.order.user,"payment_method","CVS_COD")}}}),e._v(" "),r("label",{staticClass:"form-check-label mr-3",attrs:{for:"CVS_COD"}},[e._v("超商付款")])]),e._v(" "),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.order.user.payment_method,expression:"order.user.payment_method"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-check-input",class:{"is-invalid":e.errors.has("payment")},attrs:{id:"credit_card",type:"radio",name:"payment",value:"credit_card"},domProps:{checked:e._q(e.order.user.payment_method,"credit_card")},on:{change:function(t){return e.$set(e.order.user,"payment_method","credit_card")}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"credit_card"}},[e._v("信用卡付款")])]),e._v(" "),e.errors.has("payment")?r("div",{staticClass:"text-danger"},[e._v("\n                請選擇付款方式\n              ")]):e._e()])]),e._v(" "),r("button",{staticClass:"btn btn-outline-success btn-block mt-4",on:{click:function(t){return t.preventDefault(),e.createOrder(t)}}},[e.uploadCart?r("i",{staticClass:"fas fa-spinner fa-spin"}):e._e(),e._v("送出訂單\n          ")])])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row justify-content-center"},[t("div",{staticClass:"col-10"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm"},[t("div",{staticClass:"alert alert-primary text-center alert-rounded",attrs:{role:"alert"}},[this._v("\n              1.輸入訂單資料\n            ")])]),this._v(" "),t("div",{staticClass:"col-12 col-sm"},[t("div",{staticClass:"alert border-primary text-center alert-rounded",attrs:{role:"alert"}},[this._v("\n              2.金流付款\n            ")])]),this._v(" "),t("div",{staticClass:"col-12 col-sm"},[t("div",{staticClass:"alert border-primary text-center alert-rounded",attrs:{role:"alert"}},[this._v("\n              3.完成\n            ")])])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"comment"}},[this._v("\n            備註\n            "),t("small",{staticClass:"text-muted"},[this._v("(選填)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("td",[this._v("商品")]),this._v(" "),t("td",{attrs:{width:"100"}},[this._v("\n                總計\n              ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[this._v("\n                折扣價\n                "),t("small",{staticClass:"text-success"},[this._v("(已套用coupon優惠)")])])}],!1,null,null,null);t.default=component.exports}}]);
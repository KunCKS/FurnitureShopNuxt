(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{241:function(t,e,n){"use strict";n.r(e);var c={data:function(){return{couponCode:""}},computed:{isLoading:function(){return this.$store.state.isLoading},cartData:function(){return this.$store.state.cartData},product_id:function(){return this.$store.state.product_id}},created:function(){this.$store.dispatch("getCartData")},methods:{removeCartItem:function(t){this.$store.dispatch("removeCartItem",t)},useCoupon:function(){this.$store.dispatch("useCoupon",this.couponCode)}}},r=n(3),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container pt-md-3 pb-md-5 section-full-height"},[n("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-7"},[n("div",{staticClass:"h4 text-center"},[t._v("\n          購 物 車 清 單\n        ")]),t._v(" "),t.cartData.carts.length>=1?n("table",{staticClass:"table"},[t._m(0),t._v(" "),n("tbody",t._l(t.cartData.carts,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"align-middle"},[n("button",{staticClass:"btn btn-outline-danger btn-sm border-0",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),t.removeCartItem(e.id)}}},[t.product_id!==e.id?n("i",{staticClass:"far fa-trash-alt"}):t._e(),t._v(" "),t.product_id===e.id?n("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()])]),t._v(" "),n("td",{staticClass:"align-middle",attrs:{width:"42"}},[n("div",{staticClass:"bg-cover",style:"background-image:url('"+e.product.imageUrl+"');width: 42px;height:42px"})]),t._v(" "),n("td",{staticClass:"align-middle"},[n("div",{staticClass:"text-muted"},[n("span",{staticClass:"d-md-inline-block d-none"},[t._v(t._s(e.product.category_series))]),t._v("\n                  "+t._s(e.product.title)+"\n                ")])]),t._v(" "),n("td",{staticClass:"align-middle text-right d-md-table-cell d-none"},[n("span",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(e.product.price)))]),t._v(" "),n("del",{staticClass:"text-muted"},[t._v(t._s(t._f("currency")(e.product.origin_price)))])]),t._v(" "),n("td",{staticClass:"align-middle text-center"},[n("div",{},[t._v("\n"+t._s(e.qty)+"/"+t._s(e.product.unit)+"\n")])]),t._v(" "),n("td",{staticClass:"align-middle text-right"},[n("span",{},[t._v(t._s(t._f("currency")(e.product.price*e.qty)))])])])})),0)]):t._e(),t._v(" "),t.cartData.carts.length<1?n("div",{staticClass:"py-6 text-center border-top border-bottom"},[n("div",{staticClass:"h5"},[t._v("\n            購物車沒有商品喔！\n          ")]),t._v(" "),n("nuxt-link",{staticClass:"btn btn-primary mt-3",attrs:{to:"/products"}},[t._v("\n            繼續購物\n          ")])],1):t._e()]),t._v(" "),n("div",{staticClass:"col-md-5 my-md-0 my-2"},[n("div",{staticClass:"border p-3 shadow"},[n("div",{staticClass:"h5 text-center border-bottom pb-2"},[t._v("\n            購 物 車 合 計\n          ")]),t._v(" "),n("div",{staticClass:"d-flex py-2"},[n("h6",[t._v("總計")]),t._v(" "),t.cartData.total?n("span",{staticClass:"ml-auto"},[t._v(t._s(t._f("currency")(t.cartData.total)))]):t._e()]),t._v(" "),t.cartData.final_total<t.cartData.total?n("div",{staticClass:"d-flex py-2"},[t._m(1),t._v(" "),n("span",{staticClass:"ml-auto text-success"},[t._v(t._s(t._f("currency")(t.cartData.final_total)))])]):t._e(),t._v(" "),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",staticStyle:{"font-size":"0.875rem"},attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.useCoupon(e)},input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{id:"button-addon2",type:"button"},on:{click:function(e){return e.preventDefault(),t.useCoupon(e)}}},[t._v("\n                套用優惠碼\n              ")])])]),t._v(" "),n("small",{staticClass:"ml-auto text-success py-1 d-block mb-3"},[t.cartData.final_total>=t.cartData.total?n("span",[t._v("現在輸入OPEN50OFF即可享有折扣價喔!")]):t._e()]),t._v(" "),n("nuxt-link",{staticClass:"btn btn-outline-success btn-block",class:{disabled:t.cartData.carts.length<1},attrs:{to:"/CustomerOrder"}},[t._v("\n            前往結帳\n          ")])],1)])])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",{attrs:{width:"25"}}),t._v(" "),n("th",{attrs:{colspan:"2"}},[t._v("\n              品名\n            ")]),t._v(" "),n("th",{staticClass:"d-md-table-cell d-none",attrs:{width:"90"}},[t._v("\n              單價\n            ")]),t._v(" "),n("th",{staticClass:"text-center",attrs:{width:"75"}},[t._v("\n              數量\n            ")]),t._v(" "),n("th",{attrs:{width:"90"}},[t._v("\n              小計\n            ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex"},[e("h6",[this._v("折扣價")]),this._v(" "),e("small",{staticClass:"text-success"},[this._v("(已套用coupon優惠)")])])}],!1,null,null,null);e.default=component.exports}}]);